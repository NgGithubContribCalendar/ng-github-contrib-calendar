!function(e){function n(){this.index=void 0,this.store={},this.name="LunrSearchEngine"}n.prototype.init=function(){var e=new promise.Promise;return this.index=lunr.Index.load(COMPODOC_SEARCH_INDEX.index),this.store=COMPODOC_SEARCH_INDEX.store,e.done(),e},n.prototype.search=function(e,n,t){var r=this,i=[],o=new promise.Promise;return this.index&&(i=$.map(this.index.search(e),function(e){var n=r.store[e.ref];return{title:n.title,url:n.url,body:n.summary||n.body}})),o.done({query:e,results:i.slice(0,t),count:i.length}),o},e.addEventListener(e.EVENTS.READY,function(){var t=new n,r=!1;e.search={query:function(e,n,i){if(!r)throw new Error("Search has not been initialized");return t.search(e,n,i)}},t.init().then(function(){r=!0,e.dispatchEvent({type:e.EVENTS.SEARCH_READY})})})}(compodoc);